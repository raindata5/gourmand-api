name: learn-github-actions

on: [push]

jobs:
  check-bats-version:
    environment:
      name: production
    env:
      pg_oltp_api_db_test: ${{secrets.pg_oltp_api_db_test}}
      pg_oltp_api_user: ${{secrets.pg_oltp_api_user}}
      pg_oltp_api_password: ${{secrets.pg_oltp_api_password}}
      pg_oltp_api_host: ${{secrets.pg_oltp_api_host}}
      pg_oltp_api_port: ${{secrets.pg_oltp_api_port}}
      pg_oltp_api_db: ${{secrets.pg_oltp_api_db}}
      SECRET_KEY: ${{secrets.SECRET_KEY}}
      ALGORITHM: ${{secrets.ALGORITHM}}
      ACCESS_TOKEN_EXPIRE_MINUTES: ${{secrets.ACCESS_TOKEN_EXPIRE_MINUTES}}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.8
        uses: actions/setup-python@v2
        with:
          python-version: '3.8.10'
      - name : update pip
        run: python -m pip install --upgrade pip
      - name: dependencies
        run: pip install -r requirements.txt
      - name: pytests
        run: |
          pip install pytest
          pytest 